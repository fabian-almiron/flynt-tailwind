<ul class="menu">
  {% for item in items %}
    <li class="item {{- item.current ? ' current-menu-item' }}{{ item.children ? ' has-children' : '' }}">
      <a class="link" href="{{ item.link|e('esc_url') }}" {{- item.is_external or item.is_target_blank ? ' target="_blank" rel="noopener noreferrer"' -}}>
        {{ item.title }}
        {% if item.children %}
          <span class="dropdown-indicator" aria-hidden="true">
            {{ icon('caret-caret-down', 'small') }}
          </span>
        {% endif %}
      </a>
      {% if item.children %}
        <ul class="submenu">
          {% for child in item.children %}
            <li class="submenu-item {{- child.current ? ' current-menu-item' }}">
              <a class="submenu-link" href="{{ child.link|e('esc_url') }}" {{- child.is_external or child.is_target_blank ? ' target="_blank" rel="noopener noreferrer"' -}}>{{ child.title }}</a>
            </li>
          {% endfor %}
        </ul>
      {% endif %}
    </li>
  {% endfor %}
</ul>
